package controlador.json;

import org.json.simple.JSONObject;

import modelo.Modelo;
import modelo.Municipios;
import modelo.MunicipiosId;

public class MunicipiosController extends JsonController {

	public MunicipiosController(JsonParse parser, Modelo modelo) {
		super(parser, modelo);
	}
	
	
	/**
	 * Recibe un objeto json y devuelve un objeto Municipios extrayendo sus datos
	 * Si el municipio ya existe en la BBDD devolverá una instancia del mismo
	 * @param objetoJSON
	 * @param municipioKey
	 * @param nombreKey
	 * @param descripcionKey
	 * @param pro
	 * @return
	 */
	Municipios getMunicipio(JSONObject objetoJSON, int codProvincia) {
        int codMunicipio = Integer.parseInt((String) objetoJSON.get("municipalitycode"));
    	Municipios mun = this.modelo.getDBController().getMunicipio(codMunicipio, codProvincia);
    	if(mun == null) {
    		mun = new Municipios();
    		mun.setNombre((String) objetoJSON.get("documentName"));
    		mun.setId(new MunicipiosId(codMunicipio, codProvincia));
         	mun.setDescripcion(this.parser.htmlToPlainText((String) objetoJSON.get("turismDescription")));
    	}
     	
     	return mun;
	}

}
